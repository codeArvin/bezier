{"version":3,"sources":["util.js","App.js","serviceWorker.js","index.js"],"names":["getRatioCoord","_ref","_ref2","ratio","x1","x","y1","y","getControlDots","dots","controlDots","currentDots","len","length","d","i","push","ease","linear","k","easeInQuad","Math","pow","easeInCubic","easeInQuart","easeInQuint","util","getRAF","rAF","requestAnimationFrame","cb","setTimeout","cancelrAF","cancelAnimationFrame","clearTimeout","getBezierCoords","coords","pop","console","log","getRandomColor","concat","random","toString","getRatio","time","duration","arguments","undefined","getTime","Date","now","getEmptyArr","count","arr","debounce","fn","wait","timer","context","this","args","apply","PANEL_WIDTH","CONTROL_DOTS_RANGE","DURATION_RANGE","DOT_RADIUS","COLOR","LINE_WIDTH","LINE_CAP","BEZIER_LINE_WIDTH","BEZIER_LINE_CAP","BEZIER_COLOR","DEFAULT_COUNT","DEFAULT_DURATION","DEFAULT_EASING_TYPE","App","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","windowResize","canvasWidth","window","innerWidth","canvasHeight","innerHeight","imageData","ctx","getImageData","update","drawDot","_ref$radius","radius","_ref$color","color","beginPath","arc","PI","closePath","fillStyle","fill","drawLine","beginDot","endDot","_ref2$lineWidth","lineWidth","_ref2$lineCap","lineCap","_ref2$color","moveTo","lineTo","strokeStyle","stroke","drawControlDots","forEach","index","colors","dot","drawBezier","bezierCoords","filter","c","_coords$shift","shift","_ref3","beginDrawing","startTime","destTime","map","setState","isAnimating","step","easingType","clear","drawDotsAndBezier","clearRect","handleCanvasMouseDown","e","_x","pageX","canvas","offsetLeft","_y","pageY","offsetTop","curCoord","state","_this$dots$i","sqrt","targetIndex","handleCanvasMouseMove","handleCanvasMouseUp","handleConfigChange","type","value","listRender","item","className","classNames","easing-list-item","disable","active","react_default","a","createElement","list","Item","onClick","bind","assertThisInitialized","style","margin","getContext","addEventListener","putImageData","removeEventListener","_this2","slider","min","max","onChange","disabled","bordered","size","dataSource","keys","renderItem","width","height","ref","onMouseDown","onMouseMove","onMouseUp","jsx","Component","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.60d9578c.chunk.js","sourcesContent":["// 获取线段 AB 上某一点 C，使 AC / AB = ratio\nconst getRatioCoord = ({x:x1,y:y1}, {x:x2,y:y2}, ratio) => ({\n    x: x1 + ratio * (x2 - x1),\n    y: y1 + ratio * (y2 - y1)\n});\n\n// 根据 ratio，和初始控制点获得所有控制点的坐标\nconst getControlDots = (dots, ratio) => {\n    const controlDots = [dots];\n    let currentDots = dots;\n    let len = dots.length;\n    while (len > 1) {\n        const d = [];\n        for (let i = 0; i < len - 1; i++) {\n            d.push(getRatioCoord(currentDots[i], currentDots[i + 1], ratio));\n        }\n        controlDots.push(d);\n        currentDots = d;\n        len--;\n    }\n    return controlDots;\n};\n\n// 获取贝塞尔曲线的坐标点\nconst getBezierCoords = (dots) => {\n    const coords = [];\n    let controlDots = [];\n    const step = 0.001;\n    let ratio = 0;\n    while(ratio <= 1) {\n        controlDots = getControlDots(dots, ratio);\n        coords.push(controlDots.pop()[0]);\n        ratio += step;\n    }\n    console.log('bezier coords count: ', coords.length, ratio);\n    return coords;\n};\n\nconst getRAF = () => {\n    const basicRAF = cb => setTimeout(cb, 1000 / 60);\n    let rAF = requestAnimationFrame || basicRAF;\n    let cancelrAF = cancelAnimationFrame || clearTimeout;\n    return {\n        rAF,\n        cancelrAF\n    };\n};\n\nconst debounce = (fn, wait = 100) => {\n    var timer = null;\n    return function () {\n        var context = this;\n        var args = arguments;\n        if (timer) {\n            clearTimeout(timer);\n            timer = null;\n        }\n        timer = setTimeout(function () {\n            fn.apply(context, args);\n        }, wait);\n    };\n};\n\nconst getRandomColor = () => {\n    return `#${(~~(Math.random() * (1 << 24))).toString(16)}`\n};\n\nconst ease = {\n    linear: k => k,\n    easeInQuad: k => Math.pow(k, 2),\n    easeInCubic: k => Math.pow(k, 3),\n    easeInQuart: k => Math.pow(k, 4),\n    easeInQuint: k => Math.pow(k, 5)\n};\n\nconst getRatio = (time, duration, easingFn = ease.linear) => easingFn(time/duration);\n\nconst getTime = () => Date.now();\n\nconst getEmptyArr = (count) => {\n    const arr = [];\n    for (let i = 0; i < count; i++) {\n        arr.push(i);\n    }\n    return arr;\n};\n\nconst util = {\n    getRatioCoord,\n    getControlDots,\n    getRAF,\n    getBezierCoords,\n    getRandomColor,\n    ease,\n    getRatio,\n    getTime,\n    getEmptyArr,\n    debounce\n};\n\nexport default util;","import React, { Component } from 'react';\nimport classNames from 'classnames';\nimport util from './util';\nimport { Slider, List } from 'antd';\n\nconst PRIMARY_COLOR_ENHANCE = 'rgba(33, 150, 243, 1)'; // 主题色-强调\nconst PRIMARY_COLOR = 'rgba(140, 200, 255, 1)'; // 主题色\nconst PRIMARY_COLOR_LIGHT = 'rgba(140, 200, 255, 0.3)'; // 主题色-淡\nconst DISABLE_COLOR = '#f5f5f5'; // disable 色\nconst DISABLE_COLOR_ENHANCE = '#b7b7b7'; // disable 色-强调\n\nconst PANEL_WIDTH = 450; // panel 宽度\nconst CANVAS_MARGIN = 10; // canvas 默认外边距\nconst CONTROL_DOTS_RANGE = [3, 20]; // 贝塞尔曲线控制点范围\nconst DURATION_RANGE = [1000, 10000]; // 动画时长范围\nconst DOT_RADIUS = 4; // 默认点半径\nconst COLOR = PRIMARY_COLOR_ENHANCE; // 控制点/线默认颜色\nconst LINE_WIDTH = 2; // 默认线宽\nconst LINE_CAP = 'butt'; // 默认线末端样式\nconst BEZIER_LINE_WIDTH = 4; // 贝塞尔曲线线宽\nconst BEZIER_LINE_CAP = 'round'; // 贝塞尔曲线末端样式\nconst BEZIER_COLOR = '#ff5722'; // 贝塞尔曲线颜色\nconst DEFAULT_COUNT = 3; // 贝塞尔曲线控制点个数默认值\nconst DEFAULT_DURATION = 1500; // 动画时长默认值\nconst DEFAULT_EASING_TYPE = 'linear'; // 动画效果默认值\n\nconst { rAF } = util.getRAF();\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isAnimating: false // 是否处于生成贝塞尔曲线的动画中\n        };\n\n        this.canvas = null; // canvas dom\n        this.ctx = null; // canvas 渲染上下文\n        this.imageData = null; // canvas 画布信息\n        this.canvasWidth = window.innerWidth - PANEL_WIDTH; // canvas width\n        this.canvasHeight = window.innerHeight - 20; // canvas height\n        this.count = DEFAULT_COUNT; // 贝塞尔曲线控制点个数\n        this.dots = []; // 贝塞尔曲线控制点坐标\n        this.controlDots = []; // 贝塞尔曲线所有控制点坐标\n        this.colors = []; // 贝塞尔曲线控制点颜色\n        this.ratio = 0; // 生成贝塞尔曲线所需的比例系数 [0, 1]\n        this.targetIndex = null; // 当前选中的外层控制点的 index\n        this.bezierCoords = []; // 贝塞尔曲线坐标\n        this.duration = DEFAULT_DURATION; // 生成贝塞尔曲线的动画时长\n        this.easingType = DEFAULT_EASING_TYPE; // 生成贝塞尔曲线的动画效果\n\n        this.windowResize = util.debounce(this.windowResize, 100);\n    }\n\n    componentDidMount() {\n        this.ctx = this.canvas.getContext('2d');\n        window.addEventListener('resize', this.windowResize); // 加上防抖\n    }\n\n    componentDidUpdate() {\n        // 恢复上次的状态\n        this.imageData && this.ctx.putImageData(this.imageData, 0, 0);\n        this.imageData = null;\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.windowResize);\n    }\n\n    // window 大小改变时，更新 canvasWidth、canvasHeight\n    windowResize = () => {\n        this.canvasWidth = window.innerWidth - PANEL_WIDTH;\n        this.canvasHeight = window.innerHeight - 20;\n        // 只有在 canvas 大小变化的时候需要保存当前画布信息\n        this.imageData = this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight);\n        this.update();\n    }\n\n    // 绘制点\n    drawDot = ({ x, y, radius = DOT_RADIUS, color = COLOR }) => {\n        const ctx = this.ctx;\n        ctx.beginPath();\n        ctx.arc(x, y, radius, 0, 2 * Math.PI);\n        ctx.closePath();\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n\n    // 绘制线\n    drawLine = ({\n        beginDot,\n        endDot,\n        lineWidth = LINE_WIDTH,\n        lineCap = LINE_CAP,\n        color = COLOR\n    }) => {\n        const ctx = this.ctx;\n        ctx.beginPath();\n        ctx.moveTo(beginDot.x, beginDot.y);\n        ctx.lineTo(endDot.x, endDot.y);\n        ctx.closePath();\n        ctx.lineWidth = lineWidth;\n        ctx.lineCap = lineCap;\n        ctx.strokeStyle = color;\n        ctx.stroke();\n    }\n\n    // 绘制控制点, isAll=true 绘制全部；isAll=false 绘制最外层\n    drawControlDots = (isAll = true) => {\n        if (isAll) {\n            this.controlDots.forEach((dots, index) => {\n                const color = this.colors[index];\n                dots.forEach((dot, i) => {\n                    if (i !== 0) {\n                        this.drawLine({\n                            beginDot: dots[i - 1],\n                            endDot: dot,\n                            color\n                        });\n                    }\n                    this.drawDot({\n                        x: dot.x,\n                        y: dot.y,\n                        color\n                    });\n                });\n            });\n        } else {\n            this.dots.forEach((dot, i) => {\n                if (i !== 0) {\n                    this.drawLine({\n                        beginDot: this.dots[i - 1],\n                        endDot: dot\n                    });\n                }\n                this.drawDot({\n                    x: dot.x,\n                    y: dot.y\n                });\n            });\n        }\n    }\n\n    // 绘制贝塞尔曲线，isAll=true，绘制全部；isAll=false，根据 ratio 按比例绘制\n    drawBezier = (isAll = true) => {\n        const ratio = isAll ? 1 : this.ratio;\n        const len = this.bezierCoords.length;\n        const coords = this.bezierCoords.filter((c, i) => i / len <= ratio);\n        const { x, y } = coords.shift();\n        const ctx = this.ctx;\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        coords.forEach(({x,y}) => {\n            ctx.lineTo(x, y);\n        });\n        ctx.strokeStyle = BEZIER_COLOR;\n        ctx.lineWidth = BEZIER_LINE_WIDTH;\n        ctx.lineCap = BEZIER_LINE_CAP;\n        ctx.stroke();\n    }\n\n    // 开始生成贝塞尔曲线\n    beginDrawing = () => {\n        this.bezierCoords = util.getBezierCoords(this.dots);\n        const startTime = util.getTime();\n        const destTime = startTime + this.duration;\n        this.colors = util.getEmptyArr(this.count).map(i => i === 0 ? COLOR : util.getRandomColor());\n        const step = () => {\n            const now = util.getTime();\n            if (now >= destTime) {\n                this.ratio = 1;\n            } else {\n                this.ratio = util.getRatio(now - startTime, this.duration, util.ease[this.easingType]);\n            }\n            // 更新控制点\n            this.controlDots = util.getControlDots(this.dots, this.ratio);\n            this.clear();\n            this.drawControlDots();\n            this.drawBezier(false);\n            if (now >= destTime) {\n                this.clear();\n                this.drawDotsAndBezier();\n                this.setState({ isAnimating: false });\n                return;\n            }\n            rAF(step);\n        };\n        this.setState({ isAnimating: true });\n        step();\n    }\n\n    // 只绘制最外层控制点和贝塞尔曲线\n    drawDotsAndBezier = () => {\n        this.drawControlDots(false);\n        this.drawBezier();\n    }\n\n    // 清空画布\n    clear = () => {\n        this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n    }\n\n    // 更新视图，因为没有使用 this.state\n    update = () => {\n        this.setState({});\n    }\n\n    handleCanvasMouseDown = (e) => {\n        const _x = e.pageX - this.canvas.offsetLeft;\n        const _y = e.pageY - this.canvas.offsetTop;\n        const len = this.dots.length;\n        if (len < this.count) {\n            // 控制点数不够，继续绘制\n            const curCoord = { x: _x, y: _y };\n            this.dots.push(curCoord);\n            this.drawDot(curCoord);\n            if (len !== 0) {\n                this.drawLine({\n                    beginDot: this.dots[len - 1],\n                    endDot: curCoord\n                });\n            }\n            // 如果是最后一个点，开始动画\n            if (len + 1 === this.count) {\n                this.beginDrawing();\n            }\n        } else {\n            // 确定点击外层控制点的 index\n            if (this.state.isAnimating) { return; }\n            for (let i = 0; i < this.dots.length; i++) {\n                const { x, y } = this.dots[i];\n                const distance = Math.sqrt(Math.pow(x - _x, 2) + Math.pow(y - _y, 2));\n                if (distance <= 6) {\n                    this.targetIndex = i;\n                    break;\n                }\n            }\n        }\n    }\n\n    handleCanvasMouseMove = (e) => {\n        if (this.targetIndex === null) { return; }\n        this.dots[this.targetIndex] = {\n            x: e.pageX - this.canvas.offsetLeft,\n            y: e.pageY - this.canvas.offsetTop\n        };\n        this.clear();\n        this.bezierCoords = util.getBezierCoords(this.dots);\n        this.drawDotsAndBezier();\n    }\n\n    handleCanvasMouseUp = () => {\n        this.targetIndex = null;\n    }\n\n    handleConfigChange = (type, value) => {\n        if (this.state.isAnimating) { return; }\n        switch (type) {\n            case 'controlDot':\n                this.count = value;\n                break;\n            case 'duration':\n                this.duration = value;\n                break;\n            case 'easingType':\n                this.easingType = value;\n                break;\n        }\n        this.dots = [];\n        this.controlDots = [];\n        this.colors = [];\n        this.ratio = 0;\n        this.bezierCoords = [];\n        this.clear();\n        this.update();\n    }\n\n    listRender = (item) => {\n        const className = classNames({\n            'easing-list-item': true,\n            'disable': this.state.isAnimating,\n            'active': item === this.easingType\n        });\n        return (\n            <List.Item\n                className={className}\n                onClick={this.handleConfigChange.bind(this, 'easingType', item)}\n            >\n                <div style={{margin: '0 auto'}}>{item}</div>\n            </List.Item>\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <div className=\"panel\">\n                    <div className=\"App-title\">贝塞尔曲线</div>\n                    <div className=\"control\">\n                        <div className=\"title\">控制点个数：{this.count}</div>\n                        <Slider\n                            dots={true}\n                            min={CONTROL_DOTS_RANGE[0]}\n                            max={CONTROL_DOTS_RANGE[1]}\n                            step={1}\n                            value={this.count}\n                            onChange={this.handleConfigChange.bind(this, 'controlDot')}\n                            disabled={this.state.isAnimating}\n                        />\n                    </div>\n                    <div className=\"duration\">\n                        <div className=\"title\">动画时长：{this.duration / 1000}s</div>\n                        <Slider\n                            dots={true}\n                            min={DURATION_RANGE[0]}\n                            max={DURATION_RANGE[1]}\n                            step={1000}\n                            value={this.duration}\n                            onChange={this.handleConfigChange.bind(this, 'duration')}\n                            disabled={this.state.isAnimating}\n                        />\n                    </div>\n                    <div className=\"animate\">\n                        <div className=\"title\">动画效果：{this.easingType}</div>\n                        <List\n                            className=\"easing-list\"\n                            bordered={true}\n                            size=\"small\"\n                            dataSource={Object.keys(util.ease)}\n                            renderItem={this.listRender}\n                        />\n                    </div>\n                </div>\n                <canvas\n                    className=\"canvas\"\n                    width={`${this.canvasWidth}px`}\n                    height={`${this.canvasHeight}px`}\n                    ref={c => this.canvas = c}\n                    onMouseDown={this.handleCanvasMouseDown}\n                    onMouseMove={this.handleCanvasMouseMove}\n                    onMouseUp={this.handleCanvasMouseUp}\n                >\n                    你的浏览器不支持 canvas， 请升级你的浏览器。\n                </canvas>\n                <style jsx=\"true\">{`\n                    .App {\n                        overflow: hidden;\n                        display: flex;\n                        flex-direction: row;\n                        height: 100%;\n                    }\n                    .App-title {\n                        font-size: 30px;\n                        font-weight: bolder;\n                        color: ${PRIMARY_COLOR_ENHANCE};\n                        margin-bottom: 20px;\n                    }\n                    .panel {\n                        width: ${PANEL_WIDTH}px;\n                        height: 100%;\n                        display: flex;\n                        flex-direction: column;\n                        padding-left: 20px;\n                        padding-top: 20px;\n                    }\n                    .control, .duration {\n                        width: 400px;\n                    }\n                    .title {\n                        color: ${PRIMARY_COLOR_ENHANCE};\n                        font-size: 16px;\n                        font-weight: bold;\n                    }\n                    .easing-list {\n                        margin-top: 10px;\n                        width: 200px;\n                        overflow: scroll;\n                    }\n                    .easing-list-item {\n                        transition: all 0.5s;\n                        color: ${PRIMARY_COLOR_ENHANCE};\n                    }\n                    .easing-list-item:not(.disable):hover {\n                        background-color: ${PRIMARY_COLOR_LIGHT};\n                        cursor: pointer;\n                    }\n                    .easing-list-item.disable:hover {\n                        cursor: not-allowed;\n                    }\n                    .disable {\n                        background-color: ${DISABLE_COLOR};\n                        color: ${DISABLE_COLOR_ENHANCE};\n                    }\n                    .active {\n                        background-color: ${PRIMARY_COLOR_LIGHT};\n                    }\n                    .canvas {\n                        margin: 0 ${CANVAS_MARGIN}px;\n                        border: 1px solid ${PRIMARY_COLOR};\n                        border-radius: 5px;\n                        box-shadow: 0 0 5px 1px ${PRIMARY_COLOR};\n                        align-self: center;\n                    }\n                `}</style>\n            </div>\n        );\n    }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit http://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}