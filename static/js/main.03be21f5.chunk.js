(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(t,n,e){t.exports=e(201)},116:function(t,n,e){},201:function(t,n,e){"use strict";e.r(n);var a=e(1),o=e.n(a),i=e(7),r=e.n(i),c=(e(116),e(96)),s=e(97),l=e(108),d=e(98),u=e(107),h=e(43),g=e(3),f=e.n(g),v=function(t,n,e){var a=t.x,o=t.y;return{x:a+e*(n.x-a),y:o+e*(n.y-o)}},p=function(t,n){for(var e=[t],a=t,o=t.length;o>1;){for(var i=[],r=0;r<o-1;r++)i.push(v(a[r],a[r+1],n));e.push(i),a=i,o--}return e},m={0:1,1:1},w=function t(n){var e="".concat(n);return m[e]||(m[e]=n*t(n-1)),m[e]},x={},b=function(t,n){var e="".concat(t,"_").concat(n);return x[e]||(x[e]=w(n)/(w(n-t)*w(t))),x[e]},y=function(t,n){for(var e=t.length-1,a={x:0,y:0},o=0;o<=e;o++)a.x+=t[o].x*b(o,e)*Math.pow(1-n,e-o)*Math.pow(n,o),a.y+=t[o].y*b(o,e)*Math.pow(1-n,e-o)*Math.pow(n,o);return a},D={linear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeInCubic:function(t){return Math.pow(t,3)},easeInQuart:function(t){return Math.pow(t,4)},easeInQuint:function(t){return Math.pow(t,5)}},C={getRatioCoord:v,getControlDots:p,getRAF:function(){return{rAF:requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},cancelrAF:cancelAnimationFrame||clearTimeout}},getBezierCoords:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.time("".concat(n?"new":"old"));for(var e=[],a=0;a<=1;)n?n&&e.push(y(t,a)):e.push(p(t,a).pop()[0]),a=+(a+.001).toFixed(3);return console.timeEnd("".concat(n?"new":"old")),e},getRandomColor:function(){return"#".concat((~~(Math.random()*(1<<24))).toString(16))},ease:D,getRatio:function(t,n){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.linear)(t/n)},getTime:function(){return Date.now()},getEmptyArr:function(t){for(var n=[],e=0;e<t;e++)n.push(e);return n},debounce:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=null;return function(){var a=this,o=arguments;e&&(clearTimeout(e),e=null),e=setTimeout(function(){t.apply(a,o)},n)}},getOffset:function(t){for(var n=t,e=0,a=0;n;)e+=n.offsetLeft,a+=n.offsetTop,n=n.offsetParent;return{left:e,top:a}}},E=e(203),M=e(204),z=e(205),A="rgba(33, 150, 243, 1)",k=450,T=[3,20],R=[1e3,1e4],W=4,I=A,N=2,B="butt",O=4,j="round",H="#ff5722",S=3,F=2e3,L="linear",P=C.getRAF().rAF,U=function(t){function n(t){var e;return Object(c.a)(this,n),(e=Object(l.a)(this,Object(d.a)(n).call(this,t))).windowResize=function(){e.canvasWidth=window.innerWidth-k,e.canvasHeight=window.innerHeight-20,e.imageData=e.ctx.getImageData(0,0,e.canvasWidth,e.canvasHeight),e.update()},e.drawDot=function(t){var n=t.x,a=t.y,o=t.radius,i=void 0===o?W:o,r=t.color,c=void 0===r?I:r,s=e.ctx;s.beginPath(),s.arc(n,a,i,0,2*Math.PI),s.closePath(),s.fillStyle=c,s.fill()},e.drawLine=function(t){var n=t.beginDot,a=t.endDot,o=t.lineWidth,i=void 0===o?N:o,r=t.lineCap,c=void 0===r?B:r,s=t.color,l=void 0===s?I:s,d=e.ctx;d.beginPath(),d.moveTo(n.x,n.y),d.lineTo(a.x,a.y),d.closePath(),d.lineWidth=i,d.lineCap=c,d.strokeStyle=l,d.stroke()},e.drawControlDots=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?e.controlDots.forEach(function(t,n){var a=e.colors[n];t.forEach(function(n,o){0!==o&&e.drawLine({beginDot:t[o-1],endDot:n,color:a}),e.drawDot({x:n.x,y:n.y,color:a})})}):e.dots.forEach(function(t,n){0!==n&&e.drawLine({beginDot:e.dots[n-1],endDot:t}),e.drawDot({x:t.x,y:t.y})})},e.drawBezier=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?1:e.ratio,n=e.bezierCoords.length,a=e.bezierCoords.filter(function(e,a){return a/n<=t}),o=a.shift(),i=o.x,r=o.y,c=e.ctx;c.beginPath(),c.moveTo(i,r),a.forEach(function(t){var n=t.x,e=t.y;c.lineTo(n,e)}),c.strokeStyle=H,c.lineWidth=O,c.lineCap=j,c.stroke()},e.beginDrawing=function(){e.bezierCoords=C.getBezierCoords(e.dots);var t=C.getTime(),n=t+e.duration;e.colors=C.getEmptyArr(e.count).map(function(t){return 0===t?I:C.getRandomColor()});e.setState({isAnimating:!0}),function a(){var o=C.getTime();if(e.ratio=o>=n?1:C.getRatio(o-t,e.duration,C.ease[e.easingType]),e.controlDots=C.getControlDots(e.dots,e.ratio),e.clear(),e.drawControlDots(),e.drawBezier(!1),o>=n)return e.clear(),e.drawDotsAndBezier(),void e.setState({isAnimating:!1});P(a)}()},e.drawDotsAndBezier=function(){e.drawControlDots(!1),e.drawBezier()},e.drawDetail=function(){var t=e.ctxd;t.clearRect(0,0,e.canvasWidth,e.canvasHeight),t.font="20px Arial",t.fillStyle=A,e.dots.forEach(function(n,e){var a=n.x,o=n.y;t.fillText("[".concat(a,", ").concat(o,"]"),10,25*(e+1))})},e.clear=function(){e.ctx.clearRect(0,0,e.canvasWidth,e.canvasHeight)},e.update=function(){e.setState({})},e.handleCanvasMouseDown=function(t){var n=C.getOffset(e.canvas),a=n.left,o=n.top,i=t.pageX-a,r=t.pageY-o,c=e.dots.length;if(c<e.count){var s={x:i,y:r};e.dots.push(s),e.drawDot(s),0!==c&&e.drawLine({beginDot:e.dots[c-1],endDot:s}),e.drawDetail(),c+1===e.count&&e.beginDrawing()}else{if(e.state.isAnimating)return;for(var l=0;l<e.dots.length;l++){var d=e.dots[l],u=d.x,h=d.y;if(Math.sqrt(Math.pow(u-i,2)+Math.pow(h-r,2))<=6){e.targetIndex=l;break}}}},e.handleCanvasMouseMove=function(t){if(null!==e.targetIndex){var n=C.getOffset(e.canvas),a=n.left,o=n.top;e.dots[e.targetIndex]={x:t.pageX-a,y:t.pageY-o},e.clear(),e.bezierCoords=C.getBezierCoords(e.dots),e.drawDotsAndBezier()}},e.handleCanvasMouseUp=function(){e.targetIndex=null},e.handleConfigChange=function(t,n){if(!e.state.isAnimating){switch(t){case"controlDot":e.count=n;break;case"duration":e.duration=n;break;case"easingType":e.easingType=n;break;default:return}e.reset()}},e.reset=function(){e.dots=[],e.controlDots=[],e.colors=[],e.ratio=0,e.bezierCoords=[],e.ctxd.clearRect(0,0,e.canvasWidth,e.canvasHeight),e.clear(),e.update()},e.listRender=function(t){var n=f()({"easing-list-item":!0,disable:e.state.isAnimating,active:t===e.easingType});return o.a.createElement(E.a.Item,{className:n,onClick:e.handleConfigChange.bind(Object(h.a)(Object(h.a)(e)),"easingType",t)},o.a.createElement("div",{style:{margin:"0 auto"}},t))},e.state={isAnimating:!1},e.canvas=null,e.ctx=null,e.canvasDetail=null,e.ctxd=null,e.imageData=null,e.canvasWidth=window.innerWidth-k,e.canvasHeight=window.innerHeight-20,e.count=S,e.dots=[],e.controlDots=[],e.colors=[],e.ratio=0,e.targetIndex=null,e.bezierCoords=[],e.duration=F,e.easingType=L,e.windowResize=C.debounce(e.windowResize,100),e}return Object(u.a)(n,t),Object(s.a)(n,[{key:"componentDidMount",value:function(){this.ctx=this.canvas.getContext("2d"),this.ctxd=this.canvasDetail.getContext("2d"),window.addEventListener("resize",this.windowResize)}},{key:"componentDidUpdate",value:function(){this.imageData&&this.ctx.putImageData(this.imageData,0,0),this.imageData=null}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.windowResize)}},{key:"render",value:function(){var t=this,n=this.state.isAnimating;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"panel"},o.a.createElement("div",{className:"App-title"},"\u8d1d\u585e\u5c14\u66f2\u7ebf"),o.a.createElement("div",{className:"control"},o.a.createElement("div",{className:"title"},"\u63a7\u5236\u70b9\u4e2a\u6570\uff1a",this.count),o.a.createElement(M.a,{dots:!0,min:T[0],max:T[1],step:1,value:this.count,onChange:this.handleConfigChange.bind(this,"controlDot"),disabled:n})),o.a.createElement("div",{className:"duration"},o.a.createElement("div",{className:"title"},"\u52a8\u753b\u65f6\u957f\uff1a",this.duration/1e3,"s"),o.a.createElement(M.a,{dots:!0,min:R[0],max:R[1],step:1e3,value:this.duration,onChange:this.handleConfigChange.bind(this,"duration"),disabled:n})),o.a.createElement("div",{className:"third-part"},o.a.createElement("div",{className:"animate"},o.a.createElement("div",{className:"title"},"\u52a8\u753b\u6548\u679c\uff1a",this.easingType),o.a.createElement(E.a,{className:"easing-list",bordered:!0,size:"small",dataSource:Object.keys(C.ease),renderItem:this.listRender})),o.a.createElement("div",{className:"button-wrapper"},o.a.createElement(z.a,{className:"button",onClick:this.reset,disabled:n},"\u91cd\u7ed8")))),o.a.createElement("div",{className:"canvas"},o.a.createElement("canvas",{width:"".concat(this.canvasWidth,"px"),height:"".concat(this.canvasHeight,"px"),ref:function(n){return t.canvasDetail=n}},"\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 canvas\uff0c \u8bf7\u5347\u7ea7\u4f60\u7684\u6d4f\u89c8\u5668\u3002"),o.a.createElement("canvas",{width:"".concat(this.canvasWidth,"px"),height:"".concat(this.canvasHeight,"px"),ref:function(n){return t.canvas=n},onMouseDown:this.handleCanvasMouseDown,onMouseMove:this.handleCanvasMouseMove,onMouseUp:this.handleCanvasMouseUp},"\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 canvas\uff0c \u8bf7\u5347\u7ea7\u4f60\u7684\u6d4f\u89c8\u5668\u3002")),o.a.createElement("style",{jsx:"true"},"\n                    .App {\n                        overflow: hidden;\n                        display: flex;\n                        flex-direction: row;\n                        height: 100%;\n                    }\n                    .App-title {\n                        font-size: 30px;\n                        font-weight: bolder;\n                        color: ".concat(A,";\n                        margin-bottom: 20px;\n                    }\n                    .panel {\n                        width: ").concat(k,"px;\n                        height: 100%;\n                        display: flex;\n                        flex-direction: column;\n                        padding-left: 20px;\n                        padding-top: 20px;\n                    }\n                    .third-part {\n                        display: flex;\n                        flex-direction: row;\n                    }\n                    .button-wrapper {\n                        display: flex;\n                        flex-direction: column;\n                        justify-content: flex-start;\n                        align-items: center;\n                        flex-grow: 1;\n                        padding-top: 40px;\n                    }\n                    .button {\n                        width: 150px;\n                        border: 1px solid ").concat("rgba(140, 200, 255, 1)",";\n                        color: ").concat(A,";\n                    }\n                    .button:hover {\n                        box-shadow: 0 0 5px 1px ").concat("rgba(140, 200, 255, 0.3)",";\n                        font-weight: bold;\n                    }\n                    .control, .duration {\n                        width: 400px;\n                    }\n                    .title {\n                        color: ").concat(A,";\n                        font-size: 16px;\n                        font-weight: bold;\n                    }\n                    .easing-list {\n                        margin-top: 10px;\n                        width: 200px;\n                        overflow: scroll;\n                    }\n                    .easing-list-item {\n                        transition: all 0.5s;\n                        color: ").concat(A,";\n                    }\n                    .easing-list-item:not(.disable):hover {\n                        background-color: ").concat("rgba(140, 200, 255, 0.3)",";\n                        cursor: pointer;\n                    }\n                    .easing-list-item.disable:hover {\n                        cursor: not-allowed;\n                    }\n                    .disable {\n                        background-color: ").concat("#f5f5f5",";\n                        color: ").concat("#b7b7b7",";\n                    }\n                    .active {\n                        background-color: ").concat("rgba(140, 200, 255, 0.3)",";\n                    }\n                    .canvas {\n                        margin: 0 ").concat(10,"px;\n                        border: 1px solid ").concat("rgba(140, 200, 255, 1)",";\n                        border-radius: 5px;\n                        box-shadow: 0 0 5px 1px ").concat("rgba(140, 200, 255, 1)",";\n                        align-self: center;\n                        position: relative;\n                        line-height: 0;\n                    }\n                    .canvas canvas:last-child {\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                    }\n                ")))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[111,2,1]]]);
//# sourceMappingURL=main.03be21f5.chunk.js.map